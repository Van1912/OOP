CREATE DATABASE QLCT
GO
CREATE TABLE THANH_PHO
(
matp char(2) Primary Key,
tentp nvarchar(20)
)

CREATE TABLE NHAN_VIEN (
	manv		CHAR(3) PRIMARY KEY,
	honv		NVARCHAR(20) NOT NULL,
	tennv		NVARCHAR(10) NOT NULL,
	phai		NVARCHAR(3) CHECK (phai IN (N'Nam', N'Nữ')),
	ngaysinh 		DATE NOT NULL,
	mucluong		REAL DEFAULT (800000),
	macn		CHAR(3),
	manvquanly	CHAR(3),
)
CREATE TABLE CHI_NHANH (
macn char(3) primary key,
tencn nvarchar(30),
manvptr char (3),
ngaynhamchuc date not null
)

CREATE TABLE VPHONG_CN
(
macn char(3),
matp char(2)
primary key(macn, matp)
)

create table CONG_TRINH
(
mact char(4) primary key,
tenct nvarchar(30),
ngaybd date NOT NUll,
ngaykt date NOT NULL,
matp char(2),
macn char(3)
)

create table phan_cong
(
manv char(3),
mact char(4),
sogiotuan int,
primary key (manv, mact)
)

CREATE TABLE THAN_NHAN
(
manv char(3),
tenthannhan nvarchar(30),
ngaysinh date,
phai NVARCHAR(3) CHECK (phai IN (N'Nam', N'Nữ')),
moiquanhe Nvarchar(10),
primary key(manv, tenthannhan)
)

INSERT INTO THANH_PHO VALUEs ('01', N'Hà Nội');
INSERT INTO THANH_PHO VALUEs ('02', 'TPHCM');
INSERT INTO THANH_PHO VALUEs ('03', N'Đà Nẵng');
INSERT INTO THANH_PHO VALUEs ('04', N'Cần Thơ');

INSERT INTO NHAN_VIEN VALUEs ('N01', N'Trần Ngọc',N'An',N'Nam','1965/11/10',4500000,'C03','N02');
INSERT INTO NHAN_VIEN VALUEs ('N02', N'Lưu An',N'Tư',N'Nam','1980/12/10',5200000,'C03',NULL);
INSERT INTO NHAN_VIEN VALUEs ('N03', N'Lý Thanh',N'Ngọc',N'Nữ','1988/09/25',4300000,'C02','N04');
INSERT INTO NHAN_VIEN VALUEs ('N04', N'Lê Kim',N'Oanh',N'Nữ','1975/06/22',5000000,'C02',NULL);
INSERT INTO NHAN_VIEN VALUEs ('N05', N'Lý Văn',N'Nam',N'Nam','1988/03/07',4800000,'C03','N02');
INSERT INTO NHAN_VIEN VALUEs ('N06', N'Nguyễn Thị',N'Chín',N'Nữ','1968/07/16',3200000,'C03','N05');
INSERT INTO NHAN_VIEN VALUEs ('N07', N'Lê Văn',N'Bốn',N'Nam','1970/07/18',4500000,'C02','N04');
INSERT INTO NHAN_VIEN VALUEs ('N08', N'Lê Hùng',N'Sư',N'Nam','1965/12/25',6500000,'C01',NULL);

INSERT INTO CHI_NHANH VALUES ('C01',N'Chi nhánh 1','N08','2006/02/16');
INSERT INTO CHI_NHANH VALUES ('C02',N'Chi nhánh 2','N04','2005/12/10');
INSERT INTO CHI_NHANH VALUES ('C03',N'Chi nhánh 3','N02','2004/03/07');

INSERT INTO VPHONG_CN VALUES ('C01','01');
INSERT INTO VPHONG_CN VALUES ('C02','02');
INSERT INTO VPHONG_CN VALUES ('C03','03');
INSERT INTO VPHONG_CN VALUES ('C03','04');
INSERT INTO VPHONG_CN VALUES ('C03','01');

INSERT INTO CONG_TRINH VALUES ('CT01',N'Công trình số 1','2007/03/07','2007/05/15','03','c03');
INSERT INTO CONG_TRINH VALUES ('CT02',N'Công trình số 2','2007/02/16','2007/05/15','04','c03');
INSERT INTO CONG_TRINH VALUES ('CT03',N'Công trình số 3','2007/07/16','2007/07/18','01','c03');
INSERT INTO CONG_TRINH VALUES ('CT04',N'Công trình số 4','2007/07/18','2007/12/25','02','c02');
INSERT INTO CONG_TRINH VALUES ('CT05',N'Công trình số 5','2007/06/22','2007/12/25','01','c01');
INSERT INTO CONG_TRINH VALUES ('CT06',N'Công trình số 6','2007/06/22','2007/12/10','02','c02');

INSERT INTO PHAN_CONG VALUES ('N01','CT01',18);
INSERT INTO PHAN_CONG VALUES ('N01','CT02',30);
INSERT INTO PHAN_CONG VALUES ('N05','CT03',20);
INSERT INTO PHAN_CONG VALUES ('N06','CT04',26);
INSERT INTO PHAN_CONG VALUES ('N06','CT05',12);
INSERT INTO PHAN_CONG VALUES ('N02','CT01',12);
INSERT INTO PHAN_CONG VALUES ('N02','CT06',20);
INSERT INTO PHAN_CONG VALUES ('N02','CT02',18);
INSERT INTO PHAN_CONG VALUES ('N02','CT03',22);
INSERT INTO PHAN_CONG VALUES ('N02','CT04',32);
INSERT INTO PHAN_CONG VALUES ('N02','CT05',16);
INSERT INTO PHAN_CONG VALUES ('N03','CT06',8);
INSERT INTO PHAN_CONG VALUES ('N03','CT04',28);
INSERT INTO PHAN_CONG VALUES ('N07','CT04',12);
INSERT INTO PHAN_CONG VALUES ('N07','CT06',32);
INSERT INTO PHAN_CONG VALUES ('N04','CT06',24);
INSERT INTO PHAN_CONG VALUES ('N04','CT05',16);
INSERT INTO PHAN_CONG VALUES ('N08','CT05',18);

INSERT INTO THAN_NHAN VALUES ('N01',N'Trần Đình Toàn','1980/11/30',N'Nam',N'Con');
INSERT INTO THAN_NHAN VALUES ('N03',N'Lý Vệ','1990/01/30',N'Nam',N'Anh Ruột');
INSERT INTO THAN_NHAN VALUES ('N03',N'Lý Ngọc Nữ','1980/03/30',N'Nữ',N'Chị ruột');
INSERT INTO THAN_NHAN VALUES ('N06',N'Nguyễn A','1981/11/11',N'Nam',N'Con');
INSERT INTO THAN_NHAN VALUES ('N08',N'Lê Lựu','1983/05/30',N'Nam',N'Con nuôi');
